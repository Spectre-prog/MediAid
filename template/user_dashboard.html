<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediAid - Personal Health Dashboard</title>
    <style>
        
        :root {
            --color-1: #0ef;
            --color-2: #08c;
            --color-3: #0f172a;
            --color-4: #020617;
            --color-5: #f8fafc;
            --color-6: rgba(255, 255, 255, 0.05);
            --color-7: rgba(255, 255, 255, 0.1);
            --color-8: rgba(0, 238, 255, 0.3);
            --color-9: rgba(0, 238, 255, 0.6);
            --color-10: rgba(0, 0, 0, 0.2);
            --color-11: rgba(2, 6, 23, 0.9);
            --color-12: rgba(0, 0, 0, 0.3);
            --color-13: #fff;
            --color-14: rgba(0, 0, 0, 0.4);
            --color-15: rgba(0, 238, 255, 0.15);
            --color-16: rgba(0,0,0,0.3);
            --color-17: rgba(0, 238, 255, 0.1);
            --color-18: rgba(0, 238, 255, 0.2);
            --color-19: rgba(0, 0, 0, 0.7);
            --color-20: rgba(0, 238, 255, 0.03);
            --color-21: #ff00aa;
            --color-22: rgba(0, 238, 255, 0.05);
            --color-23: rgba(255, 255, 255, 0.2);

            --primary: var(--color-1);
            --primary-dark: var(--color-2);
            --dark: var(--color-3);
            --darker: var(--color-4);
            --light: var(--color-5);
            --glass: var(--color-6);
            --glass-border: var(--color-7);
        }

        /* Base reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Body styling with animated gradient background */
        body {
            min-height: 100vh;
            background: linear-gradient(-45deg, var(--darker), var(--dark), var(--primary-dark), var(--darker));
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--light);
            overflow-x: hidden;
        }

        /* Background animation */
        @keyframes gradientBG {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Bubble Background Animation */
        .bubbles {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            top: 0;
            left: 0;
        }

        .bubble {
            position: absolute;
            bottom: -100px;
            background: var(--color-8);
            border-radius: 50%;
            opacity: 0.5;
            animation: rise 15s infinite ease-in;
        }

        .bubble:nth-child(1) {
            width: 40px;
            height: 40px;
            left: 10%;
            animation-duration: 8s;
            background: var(--color-9);
        }

        .bubble:nth-child(2) {
            width: 20px;
            height: 20px;
            left: 20%;
            animation-duration: 5s;
            animation-delay: 1s;
            background: var(--color-17);
        }

        .bubble:nth-child(3) {
            width: 50px;
            height: 50px;
            left: 35%;
            animation-duration: 7s;
            animation-delay: 2s;
            background: var(--color-18);
        }

        .bubble:nth-child(4) {
            width: 80px;
            height: 80px;
            left: 50%;
            animation-duration: 11s;
            animation-delay: 0s;
            background: var(--color-8);
        }

        .bubble:nth-child(5) {
            width: 35px;
            height: 35px;
            left: 55%;
            animation-duration: 6s;
            animation-delay: 1s;
            background: var(--color-9);
        }

        .bubble:nth-child(6) {
            width: 45px;
            height: 45px;
            left: 65%;
            animation-duration: 8s;
            animation-delay: 3s;
            background: var(--color-17);
        }

        .bubble:nth-child(7) {
            width: 25px;
            height: 25px;
            left: 75%;
            animation-duration: 7s;
            animation-delay: 2s;
            background: var(--color-18);
        }

        .bubble:nth-child(8) {
            width: 80px;
            height: 80px;
            left: 80%;
            animation-duration: 6s;
            animation-delay: 1s;
            background: var(--color-8);
        }

        .bubble:nth-child(9) {
            width: 15px;
            height: 15px;
            left: 70%;
            animation-duration: 9s;
            animation-delay: 0s;
            background: var(--color-9);
        }

        .bubble:nth-child(10) {
            width: 50px;
            height: 50px;
            left: 85%;
            animation-duration: 5s;
            animation-delay: 3s;
            background: var(--color-17);
        }

        @keyframes rise {
            0% {
                bottom: -100px;
                transform: translateX(0);
            }
            50% {
                transform: translateX(100px);
            }
            100% {
                bottom: 1080px;
                transform: translateX(-200px);
            }
        }


        /* Glass morphism effect */
        .glass-card {
            background: var(--glass);
            -webkit-backdrop-filter: blur(16px);
            backdrop-filter: blur(16px);
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 var(--color-14);
        }

        /* Main container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        /* Navigation styling */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo span {
            color: var(--light);
            font-weight: 700;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

         .btn {
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            outline: none;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--darker);
            box-shadow: 0 0 15px var(--color-8);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 0 20px var(--color-9);
        }

        .btn-secondary {
            background: transparent;
            color: var(--light);
            border: 1px solid var(--glass-border);
        }

        .btn-secondary:hover {
            background: var(--glass);
            transform: translateY(-3px);
        }

        .btn-outline {
            background: transparent;
            color: var(--light);
            border: 1px solid var(--glass-border);
        }

        .btn-outline:hover {
            background: var(--glass);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--color-14);
        }

        /* Welcome overlay styling */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--color-11);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: all 0.5s ease;
            padding: 20px;
        }

        .welcome-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .welcome-content {
            background: var(--glass);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            text-align: center;
            border: 1px solid var(--glass-border);
            box-shadow: 0 15px 50px var(--color-14);
        }

        .welcome-content h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .welcome-content p {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .welcome-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        /* Upload modal styling */
        .upload-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--glass);
            padding: 40px;
            border-radius: 20px;
            z-index: 101;
            border: 1px solid var(--glass-border);
            box-shadow: 0 15px 50px var(--color-14);
            text-align: center;
            display: none;
            max-width: 500px;
            width: 90%;
        }

        .upload-modal.active {
            display: block;
        }

        .upload-modal h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .upload-modal p {
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .upload-area {
            border: 2px dashed var(--glass-border);
            border-radius: 10px;
            padding: 40px 20px;
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: var(--color-20);
        }

        .upload-area i {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 15px;
            display: block;
        }

        /* Close button for modal */
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Dashboard main content layout */
        .dashboard {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        .dashboard-section {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px var(--color-10);
            transition: transform 0.3s ease;
            border: 1px solid var(--glass-border);
            
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 5px 15px var(--color-10);

        }

        .section-header h2 {
            font-size: 1.5rem;
            color: var(--primary);
        }

        /* Health status cards */
        .health-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .health-card {
            padding: 15px;
            border-radius: 10px;
            background: var(--color-22);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .health-card:hover {
            background: var(--color-15);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px var(--color-14);
        }

        .health-card i {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 10px;
            display: inline-block;
        }

        .health-card h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .health-card p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Documents section */
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .document-card {
            aspect-ratio: 1;
            border-radius: 10px;
            background: var(--color-22);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .document-card:hover {
            background: var(--color-15);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px var(--color-14);
        }

        .document-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .document-card .document-name {
            font-size: 0.8rem;
            text-align: center;
            padding: 0 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }

        .document-preview {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--color-19);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 102;
        }

        .document-preview.active {
            display: flex;
        }

        .preview-content {
            background: var(--glass);
            border-radius: 15px;
            padding: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow: auto;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .preview-actions {
            display: flex;
            gap: 10px;
        }

        .btn-danger {
            background: #ff4444;
            color: white;
        }

        .btn-danger:hover {
            background: #cc0000;
        }

        .preview-body {
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px dashed var(--glass-border);
            border-radius: 10px;
            padding: 20px;
        }

        /* AI Chat Interface */
        .ai-chat {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: var(--glass);
            border-radius: 15px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 10px 30px var(--color-14);
            transform: translateY(100px);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            z-index: 103;
            overflow: hidden;
        }

        .ai-chat.active {
            transform: translateY(0);
            opacity: 1;
            pointer-events: all;
        }

        .ai-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--color-15);
            border-bottom: 1px solid var(--glass-border);
        }

        .ai-header h3 {
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-close {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.2rem;
            cursor: pointer;
        }

        .ai-messages {
            padding: 15px;
            height: 350px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
        }

        .user-message {
            align-self: flex-end;
            background: var(--primary);
            color: var(--darker);
            border-bottom-right-radius: 5px;
        }

        .ai-message {
            align-self: flex-start;
            background: var(--color-17);
            border-bottom-left-radius: 5px;
        }

        .ai-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid var(--glass-border);
        }

        .ai-input input {
            flex: 1;
            background: var(--color-15);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 10px 15px;
            color: var(--light);
            outline: none;
        }

        .ai-input button {
            background: var(--primary);
            color: var(--darker);
            border: none;
            border-radius: 20px;
            padding: 0 15px;
            margin-left: 10px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .welcome-content h1 {
                font-size: 2rem;
            }
            
            .welcome-content {
                padding: 30px 20px;
            }
            
            .health-cards {
                grid-template-columns: 1fr 1fr;
            }
            
            .documents-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .ai-chat {
                width: 90%;
                bottom: 10px;
                right: 10px;
            }
        }

        /* Document types color coding */
        .document-prescription {
            border-top: 3px solid var(--color-1);
        }

        .document-report {
            border-top: 3px solid var(--color-21);
        }

        .document-scan {
            border-top: 3px solid #00ff88;
        }

        .document-xray {
            border-top: 3px solid #ff9f43;
        }

        .document-bill {
            border-top: 3px solid #ff6b6b;
        }

        .document-insurance {
            border-top: 3px solid #a55eea;
        }
    </style>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Floating background bubbles -->
    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <!-- Welcome Overlay -->
    <div class="welcome-overlay" id="welcomeOverlay">
        <div class="welcome-content glass-card">
            <h1>Welcome, <span class="gradient-text">John Doe</span></h1>
            <p>Upload any health record updates you have to enjoy the best of our MedInAid services. Our AI will analyze your documents and provide insights to help you manage your health better.</p>
            <div class="welcome-buttons">
                <button class="btn btn-primary" id="uploadBtn">
                    <i class="fas fa-upload"></i> Upload
                </button>
                <button class="btn btn-outline" id="noThanksBtn">
                    No Thanks
                </button>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="upload-modal glass-card" id="uploadModal">
        <button class="close-modal" id="closeUploadModal">&times;</button>
        <h2><i class="fas fa-cloud-upload-alt"></i> Upload Health Records</h2>
        <p>Upload your prescriptions, reports, scans, or any other medical documents for analysis and secure storage.</p>
        
        <div class="upload-area" id="uploadArea">
            <i class="fas fa-file-medical"></i>
            <h3>Drag & Drop Your Files Here</h3>
            <p>or</p>
            <input type="file" id="fileInput" style="display: none;" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
            <button class="btn btn-outline" onclick="document.getElementById('fileInput').click()">Browse Files</button>
        </div>
        
        <button class="btn btn-primary" id="confirmUpload" disabled>
            Upload & Analyze
        </button>
    </div>

    <!-- Document Preview Modal -->
    <div class="document-preview" id="documentPreview">
        <div class="preview-content glass-card">
            <div class="preview-header">
                <h2 id="previewTitle">Document Preview</h2>
                <div class="preview-actions">
                    <button class="btn btn-primary">
                        <i class="fas fa-chart-line"></i> Analyze
                    </button>
                    <button class="btn btn-danger">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                    <button class="btn btn-outline" id="closePreview">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
            <div class="preview-body" id="previewBody">
                <p>Document content will appear here</p>
            </div>
        </div>
    </div>

    <!-- AI Chat Interface -->
    <div class="ai-chat" id="aiChat">
        <div class="ai-header">
            <h3><i class="fas fa-robot"></i> MedInAid Assistant</h3>
            <button class="ai-close" id="closeAiChat">&times;</button>
        </div>
        <div class="ai-messages" id="aiMessages">
            <div class="message ai-message">
                Hello! I'm your MedInAid assistant. How can I help you with your health records today?
            </div>
        </div>
        <div class="ai-input">
            <input type="text" id="aiInput" placeholder="Ask me about your health records...">
            <button id="aiSend"><i class="fas fa-paper-plane"></i>Send</button>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="container">
        <nav>
            <a href="#" class="logo">
                Medi<span>Aid</span>
            </a>
            <div class="nav-buttons">
                <button class="btn btn-outline" id="aiButton">
                    <i class="fas fa-robot"></i> AI Assistant
                </button>
                <button class="btn btn-outline">
                    <i href ='/logout' class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </nav>
        <!-- Ugoeze, when you get here, you will clear this deafult contents as the user has not uploaded any -->
         <!-- dvkdvniik -->
        <div class="dashboard">
            <h1>Health Dashboard</h1>
            <p>Welcome back, John. Here's an overview of your health records.</p>
            
            <div class="dashboard-grid">
                <div class="dashboard-section">
                    <div class="section-header">
                        <h2><i class="fas fa-heartbeat"></i> Health Summary</h2>
                    </div>
                    <div class="health-cards">
                        <div class="health-card">
                            <i class="fas fa-calendar-check"></i>
                            <h3>Upcoming Appointments</h3>
                            <p>2 scheduled visits</p>
                        </div>
                        <div class="health-card">
                            <i class="fas fa-allergies"></i>
                            <h3>Allergies</h3>
                            <p>3 recorded allergies</p>
                        </div>
                        <div class="health-card">
                            <i class="fas fa-pills"></i>
                            <h3>Medications</h5>
                            <p>5 active prescriptions</p>
                        </div>
                        <div class="health-card">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <h3>Insurance</h3>
                            <p>Active until 12/2024</p>
                        </div>
                        <div class="health-card">
                            <i class="fas fa-virus"></i>
                            <h3>Conditions</h3>
                            <p>2 active conditions</p>
                        </div>
                        <div class="health-card">
                            <i class="fas fa-procedures"></i>
                            <h3>Procedures</h3>
                            <p>3 medical procedures</p>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-section">
                    <div class="section-header">
                        <h2><i class="fas fa-bell"></i> Notifications</h2>
                    </div>
                    <div class="notification-list">
                        <div class="notification" style="padding: 10px; border-bottom: 1px solid var(--glass-border); margin-bottom: 10px;">
                            <div><i class="fas fa-syringe" style="color: var(--primary);"></i> Flu shot due in 2 weeks</div>
                            <small style="opacity: 0.7;">2 days ago</small>
                        </div>
                        <div class="notification" style="padding: 10px; border-bottom: 1px solid var(--glass-border); margin-bottom: 10px;">
                            <div><i class="fas fa-prescription-bottle" style="color: var(--primary);"></i> Refill available for Metformin</div>
                            <small style="opacity: 0.7;">1 week ago</small>
                        </div>
                        <div class="notification" style="padding: 10px; margin-bottom: 10px;">
                            <div><i class="fas fa-stethoscope" style="color: var(--primary);"></i> Dr. Smith reviewed your latest results</div>
                            <small style="opacity: 0.7;">2 weeks ago</small>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-section">
                <div class="section-header">
                    <h2><i class="fas fa-folder"></i> Recent Documents</h2>
                    <button class="btn btn-outline">
                        View All <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="documents-grid">
                    <div class="document-card document-prescription" data-doc="prescription">
                        <i class="fas fa-prescription-bottle-alt"></i>
                        <div class="document-name">Prescription - Dr. Smith.pdf</div>
                    </div>
                    <div class="document-card document-report" data-doc="blood">
                        <i class="fas fa-vial"></i>
                        <div class="document-name">Blood Test Results.pdf</div>
                    </div>
                    <div class="document-card document-scan" data-doc="mri">
                        <i class="fas fa-magnet"></i>
                        <div class="document-name">MRI Scan Results.pdf</div>
                    </div>
                    <div class="document-card document-xray" data-doc="xray">
                        <i class="fas fa-x-ray"></i>
                        <div class="document-name">Chest X-Ray.jpg</div>
                    </div>
                    <div class="document-card document-bill" data-doc="bill">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <div class="document-name">Hospital Bill.pdf</div>
                    </div>
                    <div class="document-card document-insurance" data-doc="insurance">
                        <i class="fas fa-shield-alt"></i>
                        <div class="document-name">Insurance Claim.pdf</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const welcomeOverlay = document.getElementById('welcomeOverlay');
        const uploadBtn = document.getElementById('uploadBtn');
        const noThanksBtn = document.getElementById('noThanksBtn');
        const uploadModal = document.getElementById('uploadModal');
        const closeUploadModal = document.getElementById('closeUploadModal');
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const confirmUpload = document.getElementById('confirmUpload');
        const documentPreview = document.getElementById('documentPreview');
        const closePreview = document.getElementById('closePreview');
        const aiChat = document.getElementById('aiChat');
        const aiButton = document.getElementById('aiButton');
        const closeAiChat = document.getElementById('closeAiChat');
        const aiMessages = document.getElementById('aiMessages');
        const aiInput = document.getElementById('aiInput');
        const aiSend = document.getElementById('aiSend');
        const documentCards = document.querySelectorAll('.document-card');

        // Check if user has seen welcome before (would normally use localStorage)
        let firstVisit = true; // In a real app, check localStorage here

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            if (firstVisit) {
                welcomeOverlay.classList.remove('hidden');
            }
        });

        // Welcome overlay buttons
        uploadBtn.addEventListener('click', () => {
            welcomeOverlay.classList.add('hidden');
            uploadModal.classList.add('active');
        });

        noThanksBtn.addEventListener('click', () => {
            welcomeOverlay.classList.add('hidden');
            // This should be saved in localStorage to not show again, cause we do not want the welcome page to be showing each time the user refreshes the page
        });

        // Upload modal functionality
        closeUploadModal.addEventListener('click', () => {
            uploadModal.classList.remove('active');
        });

        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--primary)';
            uploadArea.style.background = 'var(--color-20)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = 'var(--glass-border)';
            uploadArea.style.background = 'transparent';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--glass-border)';
            uploadArea.style.background = 'transparent';
            
            if (e.dataTransfer.files.length) {
                fileInput.files = e.dataTransfer.files;
                handleFileSelection();
            }
        });

        fileInput.addEventListener('change', handleFileSelection);

        function handleFileSelection() {
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                uploadArea.innerHTML = `
                    <i class="fas fa-file-alt"></i>
                    <h3>${file.name}</h3>
                    <p>${(file.size / 1024).toFixed(2)} KB</p>
                `;
                confirmUpload.disabled = false;
            }
        }

        confirmUpload.addEventListener('click', () => {
            // In a real app, you would upload the file here
            alert('File uploaded successfully! We will analyze it soon.');
            uploadModal.classList.remove('active');
            
            // Add to recent documents (simulated)
            setTimeout(() => {
                const docsGrid = document.querySelector('.documents-grid');
                const newDoc = document.createElement('div');
                newDoc.className = 'document-card document-report';
                newDoc.innerHTML = `
                    <i class="fas fa-file-medical"></i>
                    <div class="document-name">Uploaded: ${fileInput.files[0].name}</div>
                `;
                newDoc.addEventListener('click', showDocumentPreview);
                
                // Remove the oldest document if we have 6
                if (docsGrid.children.length >= 6) {
                    docsGrid.removeChild(docsGrid.lastChild);
                }
                
                // Add to the beginning
                docsGrid.insertBefore(newDoc, docsGrid.firstChild);
            }, 1000);
        });

        // Document preview functionality
        documentCards.forEach(card => {
            card.addEventListener('click', showDocumentPreview);
        });

        function showDocumentPreview() {
            const docType = this.getAttribute('data-doc') || 'prescription';
            const docName = this.querySelector('.document-name').textContent;
            
            document.getElementById('previewTitle').textContent = docName;
            
            // a demo to simulate different document types
            let content = '';
            switch(docType) {
                case 'prescription':
                    content = `
                        <div style="font-family: monospace; white-space: pre; text-align: left;">
                            <h3>DR. SMITH'S OFFICE</h3>
                            <p>123 Medical Center Drive</p>
                            <p>--------------------------------</p>
                            <p>PATIENT: John Doe</p>
                            <p>DATE: ${new Date().toLocaleDateString()}</p>
                            <p>--------------------------------</p>
                            <p>RX: Metformin 500mg</p>
                            <p>Sig: Take one tablet twice daily with meals</p>
                            <p>Refills: 3</p>
                            <p>--------------------------------</p>
                            <p>DR. SMITH - License #12345</p>
                        </div>
                    `;
                    break;
                case 'blood':
                    content = `
                        <div style="text-align: left;">
                            <h3>BLOOD TEST RESULTS</h3>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr style="border-bottom: 1px solid var(--glass-border);">
                                    <th style="text-align: left; padding: 5px;">Test</th>
                                    <th style="text-align: left; padding: 5px;">Result</th>
                                    <th style="text-align: left; padding: 5px;">Range</th>
                                </tr>
                                <tr>
                                    <td style="padding: 5px;">Glucose</td>
                                    <td style="padding: 5px;">102 mg/dL</td>
                                    <td style="padding: 5px;">70-100</td>
                                </tr>
                                <tr style="background: var(--color-15);">
                                    <td style="padding: 5px;">Cholesterol</td>
                                    <td style="padding: 5px;">190 mg/dL</td>
                                    <td style="padding: 5px;">< 200</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px;">HDL</td>
                                    <td style="padding: 5px;">45 mg/dL</td>
                                    <td style="padding: 5px;">> 40</td>
                                </tr>
                            </table>
                        </div>
                    `;
                    break;
                case 'mri':
                    content = `
                        <div style="text-align: center;">
                            <h3>MRI SCAN REPORT</h3>
                            <p>Scanned on: ${new Date().toLocaleDateString()}</p>
                            <img src="../static/img/icons8-file-explorer-48.png" style="margin: 20px auto; width: 200px; height: 19rem">
                            <p>Findings: No abnormalities detected</p>
                            <p>Impression: Normal study</p>
                        </div>
                    `;
                    break;
                case 'xray':
                    content = `
                        <div style="text-align: center;">
                            <h3>CHEST X-RAY</h3>
                            <p>Dated: ${new Date().toLocaleDateString()}</p>
                            <img src="../static/img/new.png" style="margin: 20px auto; width: 200px; height: 7rem';">
                            <p>Findings: Lungs clear, no active disease</p>
                            <p>Cardiac silhouette normal</p>
                        </div>
                    `;
                    break;
                default:
                    content = `
                        <img src="../static/img/icons8-file-explorer-48.png">
                        <p>This is a preview of "${docName}". 
                    `;
            }
            
            document.getElementById('previewBody').innerHTML = content;
            documentPreview.classList.add('active');
        }

        closePreview.addEventListener('click', () => {
            documentPreview.classList.remove('active');
        });

        // AI Chat functionality
        aiButton.addEventListener('click', () => {
            aiChat.classList.toggle('active');
        });

        closeAiChat.addEventListener('click', () => {
            aiChat.classList.remove('active');
        });

        function addMessage(message, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            messageDiv.textContent = message;
            aiMessages.appendChild(messageDiv);
            aiMessages.scrollTop = aiMessages.scrollHeight;
        }

        aiSend.addEventListener('click', () => {
            const message = aiInput.value.trim();
            if (message) {
                addMessage(message, true);
                aiInput.value = '';
                
                // Simulate AI responseI want you to act as an academic journal editor. Please rephrase the paragraph from an academic angle based on the writting style of the Science journal: 
                setTimeout(() => {
                    const responses = [
                        "I've reviewed your health records and everything looks good overall.",
                        "Would you like me to explain anything in particular about your medications?",
                        "I notice you have an upcoming appointment. Would you like details?",
                        "Your recent blood test results show slightly elevated glucose levels. I can suggest dietary recommendations if you'd like.",
                        "You have 2 active prescriptions right now. Do you need refills for any medications?"
                    ];
                    
                    const response = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(response, false);
                }, 1000);
            }
        });

        aiInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                aiSend.click();
            }
        });
    </script>
</body>
</html>